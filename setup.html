<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jailex Studio | Easy Setup</title>
    <style>
        body { font-family: sans-serif; background: #0B162A; color: white; text-align: center; padding: 50px; }
        .card { background: #1a2a44; padding: 30px; border-radius: 15px; display: inline-block; border: 2px solid #C83803; }
        button { background: #6441a5; color: white; border: none; padding: 15px 30px; border-radius: 5px; cursor: pointer; font-size: 1.2rem; font-weight: bold; }
        button:hover { background: #7d5bbe; }
        #token-display { background: #000; padding: 15px; margin-top: 20px; border-radius: 5px; word-break: break-all; display: none; color: #00FF00; font-family: monospace; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="card">
        <h1>Welcome to Jailex Studio</h1>
        <p>Hey Cody! Click the button below to get your Twitch Token.</p>
        
        <button id="auth-btn">Connect My Twitch</button>

        <div id="token-display">
            <p style="color: white;">Success! Here is your Access Token:</p>
            <span id="token-text"></span>
            <p style="color: #888; font-size: 0.8rem;">(Copy this code for your Jailex settings)</p>
        </div>
    </div>

    <script>
        const CLIENT_ID = 'gjnlu6ar9sagyvgvhvari4hszi0xas'; // <--- PASTE YOUR TWITCH CLIENT ID HERE
        const REDIRECT_URI = window.location.origin + window.location.pathname;
        const SCOPES = 'chat:read+chat:edit';

        // 1. Redirect to Twitch when button is clicked
        document.getElementById('auth-btn').onclick = () => {
            const authUrl = `https://id.twitch.tv/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&response_type=token&scope=${SCOPES}`;
            window.location.href = authUrl;
        };

        // 2. Check if we just came back from Twitch with a token
        const hash = window.location.hash;
        if (hash.includes('access_token=')) {
            const params = new URLSearchParams(hash.substring(1));
            const token = params.get('access_token');
            
            // Show the token and hide the button
            document.getElementById('token-text').innerText = token;
            document.getElementById('token-display').style.display = 'block';
            document.getElementById('auth-btn').classList.add('hidden');
        }
    </script>
</body>
</html>
