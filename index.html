<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jailex | Streaming Made Easy</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --navy: #0B162A;
            --orange: #C83803;
            --sidebar-bg: #070D19;
            --card-bg: #152238;
        }

        body { 
            background-color: var(--navy); 
            color: #FFFFFF; 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            display: flex; 
            height: 100vh; 
            overflow: hidden; 
        }

        /* --- CLEAN SIDEBAR --- */
        .sidebar { 
            width: 280px; 
            background-color: var(--sidebar-bg); 
            border-right: 2px solid rgba(255,255,255,0.05); 
            padding: 40px 20px; 
            display: flex; 
            flex-direction: column; 
        }

        .sidebar h1 { 
            color: #FFFFFF; 
            font-size: 2.2rem; 
            text-align: center; 
            margin-bottom: 5px; 
            font-weight: 900;
            letter-spacing: -1px;
        }

        .sidebar .tagline {
            color: var(--orange);
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 50px;
        }

        .nav-item { 
            padding: 16px 20px; 
            color: rgba(255,255,255,0.5); 
            border-radius: 10px; 
            margin-bottom: 8px; 
            cursor: pointer; 
            transition: 0.2s; 
            font-weight: 600;
            font-size: 0.9rem;
        }

        .nav-item:hover { color: #fff; background-color: rgba(255,255,255,0.05); }
        .nav-item.active { 
            background-color: rgba(200, 56, 3, 0.15); 
            color: var(--orange); 
        }

        /* --- MAIN AREA --- */
        .main { 
            flex-grow: 1; 
            padding: 60px; 
            display: flex; 
            flex-direction: column; 
            background: linear-gradient(180deg, #101d33 0%, #0B162A 100%);
            overflow-y: auto;
        }

        .content-header { margin-bottom: 40px; }
        .content-header h2 { font-size: 1.8rem; font-weight: 800; margin: 0; }

        /* --- CENTRAL CARD --- */
        .card { 
            background-color: var(--card-bg); 
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px; 
            padding: 50px; 
            width: 100%; 
            max-width: 600px; 
            box-shadow: 0 40px 100px rgba(0,0,0,0.5); 
        }

        .card h3 { font-size: 1.4rem; margin-top: 0; }
        .card p { color: #94a3b8; line-height: 1.6; margin-bottom: 30px; }

        .sync-btn { 
            background-color: var(--orange); 
            color: white; 
            border: none; 
            padding: 20px; 
            font-size: 1.1rem; 
            font-weight: 700; 
            border-radius: 12px; 
            cursor: pointer; 
            width: 100%; 
            transition: 0.3s;
        }

        .sync-btn:hover { background-color: #e64002; transform: translateY(-2px); }

        #sync-status { 
            display: block; 
            margin-top: 25px; 
            text-align: center;
            font-weight: 700; 
            color: var(--orange); 
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        #console { 
            font-size: 0.75rem; 
            color: #475569; 
            margin-top: 40px; 
            background: rgba(0,0,0,0.2); 
            padding: 15px; 
            border-radius: 8px; 
            height: 60px; 
            overflow-y: auto; 
            font-family: monospace; 
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <h1>JAILEX</h1>
        <div class="tagline">Streaming Made Easy</div>
        
        <div class="nav-item active">Credentials</div>
        <div class="nav-item">Bot Commands</div>
        <div class="nav-item">Keywords</div>
        <div class="nav-item">Socials Timer</div>
        <div class="nav-item">Overlay</div>
    </div>

    <div class="main">
        <div class="content-header">
            <h2>Account Integration</h2>
        </div>

        <div class="card">
            <h3>Twitch Connection</h3>
            <p>Connect your account to enable the Jailex automated streaming suite. This allows the bot to monitor your chat and post your scheduled reminders.</p>
            
            <button id="sync-button" class="sync-btn">Link Twitch Account</button>
            <span id="sync-status">Status: Disconnected</span>
            
            <div id="console">System initialized...</div>
        </div>
    </div>

    <script>
        const CLIENT_ID = 'nk06xpus7cc4naiif04xqqamwcf8rz';

        function log(msg) {
            const con = document.getElementById('console');
            if (con) con.innerHTML += `<div>> ${msg}</div>`;
            con.scrollTop = con.scrollHeight;
        }

        document.getElementById('sync-button').onclick = function() {
            log("Starting handshake...");
            const redirectUri = "https://jailex-h16lm8t8s-justquitbro7s-projects.vercel.app/setup.html";
            const scope = encodeURIComponent('chat:read chat:edit');
            const authUrl = `https://id.twitch.tv/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${redirectUri}&response_type=token&scope=${scope}`;
            window.open(authUrl, 'JailexSync', 'width=450,height=600');
        };

        window.addEventListener('message', (event) => {
            if (event.data.type === 'TWITCH_TOKEN') {
                const token = event.data.token;
                localStorage.setItem('jailex_token', token);
                log("Authentication successful.");
                connectBot(token);
            }
        });

        async function connectBot(token) {
            const status = document.getElementById('sync-status');
            status.innerText = "Status: Connecting...";
            try {
                const res = await fetch('https://api.twitch.tv/helix/users', {
                    headers: { 'Client-ID': CLIENT_ID, 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();
                if (data.data && data.data[0]) {
                    const user = data.data[0].display_name;
                    status.innerText = `Status: Live as ${user}`;
                    status.style.color = "#10b981"; // Clean Green
                    log(`Linked to ${user}`);
                }
            } catch (err) {
                log("Error: " + err.message);
                status.innerText = "Status: Error";
            }
        }

        window.onload = () => {
            const savedToken = localStorage.getItem('jailex_token');
            if (savedToken) connectBot(savedToken);
        };
    </script>
</body>
</html>
