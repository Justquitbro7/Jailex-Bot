<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAILEX | Professional Streaming Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --navy: #0B162A;
            --orange: #C83803;
            --dark-bg: #070D19;
            --card: #152238;
        }

        body { 
            background-color: var(--navy); 
            color: #FFFFFF; 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            display: flex; 
            height: 100vh; 
            overflow: hidden; 
        }

        /* --- PROFESSIONAL SIDEBAR --- */
        .sidebar { 
            width: 280px; 
            background-color: var(--dark-bg); 
            border-right: 3px solid var(--orange); 
            padding: 40px 20px; 
            display: flex; 
            flex-direction: column; 
            box-shadow: 10px 0 30px rgba(0,0,0,0.5);
        }

        .sidebar h1 { 
            color: var(--orange); 
            font-size: 2.2rem; 
            text-align: center; 
            margin-bottom: 50px; 
            letter-spacing: 5px;
            font-weight: 900;
        }

        .nav-item { 
            padding: 18px 25px; 
            color: rgba(255,255,255,0.6); 
            border-radius: 12px; 
            margin-bottom: 12px; 
            cursor: pointer; 
            transition: 0.3s; 
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.85rem;
        }

        .nav-item:hover { color: #fff; background-color: rgba(200, 56, 3, 0.1); }
        .nav-item.active { 
            background-color: var(--orange); 
            color: white; 
            box-shadow: 0 4px 15px rgba(200, 56, 3, 0.3);
        }

        /* --- MAIN WORKSPACE --- */
        .main { 
            flex-grow: 1; 
            padding: 60px; 
            display: flex; 
            flex-direction: column; 
            background: radial-gradient(circle at center, #1c2e4a 0%, #0B162A 100%);
            overflow-y: auto;
        }

        .workspace-header { 
            width: 100%; 
            max-width: 900px; 
            margin: 0 auto 40px auto; 
        }

        .workspace-header h2 { 
            font-size: 2.2rem; 
            font-weight: 900; 
            text-transform: uppercase; 
            border-left: 6px solid var(--orange); 
            padding-left: 20px;
        }

        /* --- THE HUD CARD --- */
        .card { 
            background-color: var(--card); 
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 24px; 
            padding: 50px; 
            width: 100%; 
            max-width: 650px; 
            margin: 0 auto;
            text-align: center; 
            box-shadow: 0 30px 80px rgba(0,0,0,0.8); 
        }

        .card p { color: #8e9aaf; font-size: 1.1rem; line-height: 1.6; margin-bottom: 35px; }

        /* THE SYNC BUTTON */
        .sync-btn { 
            background-color: var(--orange); 
            color: white; 
            border: none; 
            padding: 22px 40px; 
            font-size: 1.2rem; 
            font-weight: 800; 
            border-radius: 14px; 
            cursor: pointer; 
            width: 100%; 
            text-transform: uppercase; 
            letter-spacing: 2px;
            transition: 0.4s;
        }

        .sync-btn:hover { 
            background-color: #FF4500; 
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(200, 56, 3, 0.4);
        }

        #sync-status { 
            display: block; 
            margin-top: 30px; 
            font-size: 1.3rem; 
            font-weight: 900; 
            color: var(--orange); 
            letter-spacing: 1px;
        }

        /* LOGGING / STATUS CONSOLE */
        #debug-log { 
            font-size: 0.75rem; 
            color: #5d6d7e; 
            margin-top: 40px; 
            text-align: left; 
            background: #000; 
            padding: 15px; 
            border-radius: 10px; 
            height: 90px; 
            overflow-y: auto; 
            font-family: monospace; 
            border: 1px solid #1c2e4a; 
        }

        .footer-tag { margin-top: auto; font-size: 0.7rem; color: #2c3e50; text-align: center; font-weight: 800; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h1>JAILEX</h1>
        <div class="nav-item active">Credentials</div>
        <div class="nav-item">Bot Commands</div>
        <div class="nav-item">TTS Settings</div>
        <div class="nav-item">Keywords</div>
        <div class="nav-item">Socials Timer</div>
        <div class="footer-tag">JAILEX ENGINE V1.0 - BEARS EDITION</div>
    </div>

    <div class="main">
        <div class="workspace-header">
            <h2>System Credentials</h2>
        </div>

        <div class="card">
            <h3 style="margin-top:0; font-size: 1.5rem;">Twitch Link</h3>
            <p>Sync your main broadcasting account to enable chat monitoring, automated commands, and real-time bot interactions.</p>
            
            <button id="sync-button" class="sync-btn">
                Link Twitch Account
            </button>

            <span id="sync-status">STATUS: STANDBY</span>
            
            <div id="debug-log">System: Ready for handshake...</div>
        </div>
    </div>

    <script>
        const CLIENT_ID = 'nk06xpus7cc4naiif04xqqamwcf8rz';

        function log(msg) {
            const debug = document.getElementById('debug-log');
            if (debug) debug.innerHTML += `<div>> ${msg}</div>`;
            debug.scrollTop = debug.scrollHeight;
        }

        // BUTTON TRIGGER
        document.getElementById('sync-button').onclick = function() {
            log("Opening Secure Handshake...");
            const redirectUri = "https://jailex-h16lm8t8s-justquitbro7s-projects.vercel.app/setup.html";
            const scope = encodeURIComponent('chat:read chat:edit');
            const authUrl = `https://id.twitch.tv/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${redirectUri}&response_type=token&scope=${scope}`;
            window.open(authUrl, 'JailexSync', 'width=450,height=600');
        };

        // HANDSHAKE LISTENER
        window.addEventListener('message', (event) => {
            if (event.data.type === 'TWITCH_TOKEN') {
                const token = event.data.token;
                localStorage.setItem('jailex_token', token);
                log("Authentication successful! Connecting...");
                connectBot(token);
            }
        });

        // CONNECT TO TWITCH
        async function connectBot(token) {
            const status = document.getElementById('sync-status');
            status.innerText = "STATUS: CONNECTING...";
            try {
                const res = await fetch('https://api.twitch.tv/helix/users', {
                    headers: { 'Client-ID': CLIENT_ID, 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();
                if (data.data && data.data[0]) {
                    const user = data.data[0].display_name;
                    status.innerText = `STATUS: LIVE AS ${user.toUpperCase()}`;
                    status.style.color = "#00FF00";
                    log(`Bot successfully linked to ${user}`);
                }
            } catch (err) {
                log("Error: " + err.message);
                status.innerText = "STATUS: SYNC FAILED";
            }
        }

        // AUTO-LOGIN ON LOAD
        window.onload = () => {
            const savedToken = localStorage.getItem('jailex_token');
            if (savedToken) {
                log("Restoring active session...");
                connectBot(savedToken);
            }
        };
    </script>
</body>
</html>
